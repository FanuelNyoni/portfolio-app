import React, { useState, useEffect } from "react";
import {
  FaHome,
  FaUser,
  FaBriefcase,
  FaImage,
  FaBars,
  FaTimes,
} from "react-icons/fa";
import "./Navbar.css";

const Navbar = () => {
  const [prevScrollPos, setPrevScrollPos] = useState(0);
  const [visible, setVisible] = useState(true);
  const [menuOpen, setMenuOpen] = useState(false);

  const handleScroll = () => {
    const currentScrollPos = window.pageYOffset;
    setVisible(currentScrollPos < prevScrollPos);
    setPrevScrollPos(currentScrollPos);
  };

  useEffect(() => {
    window.addEventListener("scroll", handleScroll);

    return () => {
      window.removeEventListener("scroll", handleScroll);
    };
  }, [prevScrollPos]);

  const toggleMenu = () => {
    setMenuOpen(!menuOpen);
  };

  return (
    <nav className={`navbar ${visible ? "navbar--visible" : "navbar--hidden"}`}>
      <div className="navbar__container">
        <svg className="logo"
          width="101"
          height="27"
          viewBox="0 0 101 27"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M49.75 25.625C49.75 25.7071 49.7338 25.7883 49.7024 25.8642C49.671 25.94 49.625 26.0089 49.5669 26.0669C49.5089 26.125 49.44 26.171 49.3642 26.2024C49.2883 26.2338 49.2071 26.25 49.125 26.25H36.625C36.5429 26.25 36.4616 26.2338 36.3858 26.2024C36.31 26.171 36.2411 26.125 36.1831 26.0669C36.125 26.0089 36.079 25.94 36.0476 25.8642C36.0162 25.7883 36 25.7071 36 25.625V13.75C36 10.625 39.75 8.75 39.75 8.75H46C46 8.75 49.75 10.625 49.75 13.75V25.625Z"
            fill="#00A0FF"
          />
          <path d="M39.6 6.25H45.85V8.75H39.6V6.25Z" fill="#00A0FF" />
          <path d="M39 4.375H46.5V6.875H39V4.375Z" fill="#F7931E" />
          <path
            d="M44.625 0H40.875C40.875 0 40.875 2.5 39 4.375H42.75C42.5858 4.37496 42.4232 4.34258 42.2715 4.27971C42.1199 4.21683 41.9821 4.1247 41.866 4.00857C41.7499 3.89244 41.6578 3.75458 41.5951 3.60287C41.5323 3.45116 41.5 3.28857 41.5 3.12438C41.5 2.96018 41.5324 2.7976 41.5953 2.64593C41.6582 2.49425 41.7503 2.35644 41.8664 2.24036C41.9826 2.12429 42.1204 2.03223 42.2721 1.96943C42.4238 1.90663 42.5864 1.87433 42.7506 1.87438C43.0822 1.87446 43.4002 2.00627 43.6346 2.2408C43.8691 2.47534 44.0007 2.7934 44.0006 3.125C44.0005 3.4566 43.8687 3.77459 43.6342 4.00901C43.3997 4.24343 43.0816 4.37508 42.75 4.375H46.5C44.625 2.5 44.625 0 44.625 0Z"
            fill="#1E1E1E"
          />
          <path
            d="M47.1506 20.2225C46.9587 20.3294 46.1188 20.7163 45.9425 20.7825C45.6613 20.8888 45.3725 20.9938 45.0925 21.0931C44.6837 21.2381 44.2881 21.25 43.8131 21.25C43.1444 21.25 42.5263 21.1069 41.96 20.9506C41.7713 20.8994 41.5819 20.8419 41.39 20.7844C40.7938 20.6056 40.1775 20.4206 39.5306 20.3625C39.1975 20.3344 38.8275 20.3725 38.4 20.4638V21.7713L38.5894 21.695C38.9263 21.6156 39.1981 21.5856 39.4181 21.6075C39.9394 21.6538 40.4694 21.8131 41.0306 21.9819C41.2306 22.0419 41.4313 22.1013 41.6288 22.1563C42.2813 22.335 42.9969 22.5 43.8131 22.5C44.3681 22.5 44.9156 22.4825 45.5119 22.2713C45.7994 22.1681 46.0962 22.0606 46.3831 21.9525C46.6419 21.8458 46.8981 21.7326 47.1513 21.6131L47.1506 20.2225ZM45.9425 18.2825C45.6613 18.3888 45.3725 18.4938 45.0925 18.5931C44.6837 18.7381 44.2881 18.75 43.8131 18.75C43.1444 18.75 42.5263 18.6069 41.96 18.4506C41.7713 18.3994 41.5819 18.3419 41.39 18.2844C40.7938 18.1056 40.1775 17.9206 39.5306 17.8625C39.1975 17.8344 38.8275 17.8731 38.4 17.9644V19.2713L38.5894 19.195C38.9263 19.1156 39.1981 19.085 39.4181 19.1075C39.9394 19.1538 40.4694 19.3131 41.0306 19.4819C41.2306 19.5419 41.4313 19.6013 41.6288 19.6563C42.2813 19.835 42.9969 20 43.8131 20C44.3681 20 44.9156 19.9825 45.5119 19.7713C45.7994 19.6681 46.0962 19.5606 46.3831 19.4525C46.6419 19.3458 46.8981 19.2326 47.1513 19.1131V17.7225C46.9588 17.8294 46.1188 18.2163 45.9425 18.2825ZM45.9425 15.7825C45.6613 15.8888 45.3725 15.9938 45.0925 16.0931C44.6837 16.2381 44.2881 16.25 43.8131 16.25C43.1444 16.25 42.5263 16.1069 41.96 15.9506C41.7713 15.8994 41.5819 15.8419 41.39 15.7844C40.7938 15.6056 40.1775 15.4206 39.5306 15.3625C39.1975 15.3344 38.8275 15.3725 38.4 15.4638V16.7713L38.5894 16.695C38.9263 16.6156 39.1981 16.585 39.4181 16.6075C39.9394 16.6538 40.4694 16.8131 41.0306 16.9819C41.2306 17.0419 41.4313 17.1013 41.6288 17.1563C42.2813 17.335 42.9969 17.5 43.8131 17.5C44.3681 17.5 44.9156 17.4825 45.5119 17.2713C45.7994 17.1681 46.0962 17.0606 46.3831 16.9525C46.6419 16.8458 46.8981 16.7326 47.1513 16.6131V15.2225C46.9588 15.3294 46.1188 15.7163 45.9425 15.7825Z"
            fill="white"
          />
          <path className="code-tags"
            d="M7.09087 22.896L0.722874 20.32V17.376L7.09087 14.784H7.42687V17.28L3.09087 18.752V18.928L7.42687 20.416V22.896H7.09087ZM82.5831 26.416V25.904L87.7191 10.528H89.9911V11.04L84.8711 26.416H82.5831ZM93.5727 22.896V20.416L97.9087 18.928V18.752L93.5727 17.28V14.784H93.9087L100.277 17.376V20.32L93.9087 22.896H93.5727Z"
            fill="#1b1b1b"
          />
          <path
            d="M19.6481 24V21.376H20.4481V14.176H19.6481V11.552H29.2161V15.696H26.3841V14.176H24.9281V16.832H27.3441V18.656H24.9281V21.376H27.0241V24H19.6481ZM66.1641 11.552H71.4121V14.176H70.6121V24H66.1161L61.4281 16.784V21.376H62.1961V24H56.9481V21.376H57.7481V14.176H56.9481V11.552H62.7241L66.9321 17.968V14.176H66.1641V11.552Z"
            fill="white"
          />
        </svg>

        <div className="navbar__links">
          <a href="#home">
            <FaHome className="navbar__icon" />
            Home
          </a>
          <a href="#about">
            <FaUser className="navbar__icon" />
            About
          </a>
          <a href="#services">
            <FaBriefcase className="navbar__icon" />
            Services
          </a>
          <a href="#portfolio">
            <FaImage className="navbar__icon" />
            Portfolio
          </a>
        </div>
        <button className="navbar__contact-button">Contact</button>
        <div
          className={`navbar__menu-icon ${menuOpen ? "menu-open" : ""}`}
          onClick={toggleMenu}
        >
          {menuOpen ? <FaTimes /> : <FaBars />}
        </div>
      </div>
      <ul
        className={`navbar__dropdown ${
          menuOpen ? "navbar__dropdown--open" : ""
        }`}
      >
        <li>
          <a href="#home">
            <FaHome className="navbar__icon" />
            <span>Home</span>
          </a>
        </li>
        <li>
          <a href="#about">
            <FaUser className="navbar__icon" />
            <span>About</span>
          </a>
        </li>
        <li>
          <a href="#services">
            <FaBriefcase className="navbar__icon" />
            <span>Services</span>
          </a>
        </li>
        <li>
          <a href="#portfolio">
            <FaImage className="navbar__icon" />
            <span>Portfolio</span>
          </a>
        </li>
      </ul>
    </nav>
  );
};

export default Navbar;
